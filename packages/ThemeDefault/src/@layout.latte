<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>{include title}{if $activePage !== 'overview' && $title} | {$title}{/if}</title>

    <link rel="stylesheet" href="resources/style.css">
</head>

<body>
<div id="left">
    <div id="menu">
        <a n:tag-if="$activePage !== overview" href="index.html" title="Overview">
            <span>{if $title}{$title}{else}Overview{/if}</span>
        </a>

        <div id="groups">
            <h3>Namespaces</h3>
            {include namespaces, allNamespaces => $allNamespaces, activeNamespace => $activeNamespace}
        </div>

        <hr>

        {define elements}
            <ul>
                <li n:foreach="$elements as $element" n:class="$activeElement === $element ? active">
                    <a n:class="$element->isDeprecated() ? deprecated" href="{$element|linkReflection}">
                        {if $activeNamespace}
                            {$element->getShortName()}{else}{$element->getName()}
                        {/if}
                    </a>
                </li>
            </ul>
        {/define}

        <div id="elements">
            {if $allClasses}
                <h3>Classes</h3>
                {include elements, elements => $allClasses, activeElement => $class}
            {/if}

            {if $allInterfaces}
                <h3>Interfaces</h3>
                {include elements, elements => $allInterfaces, activeElement => $class}
            {/if}

            {if $allTraits}
                <h3>Traits</h3>
                {include elements, elements => $allTraits, activeElement => $class}
            {/if}

            {if $allFunctions}
                <h3>Functions</h3>
                {include elements, elements => $allFunctions, activeElement => $function}
            {/if}
        </div>
    </div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
    <form id="search">
        <input type="hidden" name="ie" value="UTF-8">
        <input type="text" name="q" class="text" placeholder="Search" autofocus>
    </form>

    <div id="navigation">
        <ul>
            <li n:if="$allNamespaces" n:class="$activePage === namespace ? active">
                <a n:tag-if="$activePage !== namespace && $activeNamespace" href="{$activeNamespace|linkNamespace}">
                    <span>Namespace</span>
                </a>
            </li>
            <li n:class="$activePage === class ? active" n:if="!$function">
                <a n:tag-if="$activePage !== class && $activeClass" href="{$activeClass|classUrl}">
                    <span>Class</span>
                </a>
            </li>
            {* @todo: add interfaces and traits *}
            <li n:if="$activeFunction" n:class="$activePage === function ? active">
                <a n:tag-if="$activePage !== function" href="{$activeFunction|functionUrl}">
                    <span>Function</span>
                </a>
            </li>
        </ul>
        <ul>
            {foreach $annotationGroups as $annotationGroup}
                <li n:class="$activePage === 'annotation-group-' . $annotationGroup ? active">
                    <a href="annotation-group-{$annotationGroup}.html">
                        <span>{$annotationGroup|firstUpper}</span>
                    </a>
                </li>
            {/foreach}
        </ul>
    </div>

    {include content}

    <div id="footer">
        Generated by <a href="https://apigen.org">ApiGen</a>
    </div>
</div>
</div>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.cookie.js"></script>
    <script src="/js/jquery.sprintf.js"></script>
    <script src="/js/jquery.autocomplete.js"></script>
    <script src="/js/jquery.sortElements.js"></script>
    <script src="/js/main.js"></script>
    <script src="elementlist.js"></script>
</body>
</html>


{define namespaces}
    <ul>
        {foreach $allNamespaces as $namespace}
            {continueIf $namespace === 'PHP'}

            {var $nextLevel = substr_count($iterator->nextValue, '\\') > substr_count($namespace, '\\')}
            <li n:class="$activeNamespace === $namespace || 0 === strpos($activeNamespace, $namespace . '\\') ? active">
                <a href="{$namespace|linkNamespace}">
                    {$namespace|subNamespace}<span n:tag-if="$nextLevel"></span>
                </a>

                {if $nextLevel}
                    <ul>
                {else}
                    </li>
                    {if substr_count($iterator->nextValue, '\\') < substr_count($namespace, '\\')}
                        {='</ul></li>'|repeat:substr_count($namespace, '\\') - substr_count($iterator->nextValue, '\\')|noescape}
                    {/if}
                {/if}
        {/foreach}
    </ul>
{/define}
